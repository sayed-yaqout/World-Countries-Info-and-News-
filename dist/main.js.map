{"version":3,"sources":["main.js"],"names":["countries","COUNTRIES_API_KEY","initialize","countriesData","gallery","document","querySelector","template","getElementById","innerHTML","i","length","rendered","Mustache","render","flag","name","capital","alpha3Code","load_js","head_ID","getElementsByTagName","script_element","createElement","type","src","appendChild","chooseCountry","event","template2","countrysection","alphaCode","currentTarget","getAttribute","clickedCountry","find","c","neighborsAlphaCodes","borders","neighbors","_loop","currency","currencies","language","languages","pop","numberWithCommas","population","subreg","subregion","timezone","timezones","nibor","fetchNews","alpha2Code","x","toString","replace","fetch","concat","then","res","json","data","showNews","console","log","err","newsData","news","newsTemplate","forNews","totalResults","article","articles","Imgpath","urlToImage","header","title","details","description","source","date","publishedAt","setTimeout"],"mappings":"AAAA,aAEA,IAAIA,UACEC,kBAAoB,uCAM1B,SAASC,WAAWC,GAClBH,UAAYG,EAIZ,IAHA,IAAIC,EAAUC,SAASC,cAAc,YACjCC,EAAWF,SAASG,eAAe,iBAAiBC,UAE/CC,EAAI,EAAGA,EAAIV,UAAUW,OAAQD,IAAK,CACzC,IAAIE,EAAWC,SAASC,OAAOP,EAAU,CACvCQ,KAAMf,UAAUU,GAAGK,KACnBC,KAAMhB,UAAUU,GAAGM,KACnBC,QAASjB,UAAUU,GAAGO,QACtBC,WAAYlB,UAAUU,GAAGQ,aAG3Bd,EAAQK,WAAaG,GAOzB,SAASO,UAEP,IAAIC,EAAUf,SAASgB,qBAAqB,QAAQ,GAEhDC,EAAiBjB,SAASkB,cAAc,UAE5CD,EAAeE,KAAO,kBAEtBF,EAAeG,IAAM,yDACrBL,EAAQM,YAAYJ,GAKtB,SAASK,cAAcC,GAWrB,IAVA,IAAIC,EAAYxB,SAASG,eAAe,mBAAmBC,UACvDqB,EAAiBzB,SAASG,eAAe,cAGzCuB,EAFSH,EAAMI,cAEIC,aAAa,SAEhCC,EAAiBlC,UAAUmC,MAAK,SAACC,GAAD,OAAOA,EAAElB,aAAea,KAExDM,EAAsBH,EAAeI,QACrCC,EAAY,GAVYC,EAAA,SAWnB9B,GACP6B,EAAU7B,GAAKV,UAAUmC,MACvB,SAACC,GAAD,OAAOA,EAAElB,aAAemB,EAAoB3B,MAC5CM,MAHKN,EAAI,EAAGA,EAAI2B,EAAoB1B,OAAQD,IAAK8B,EAA5C9B,GAMT,IAAIE,EAAWC,SAASC,OAAOe,EAAW,CACxCb,KAAMkB,EAAelB,KACrBD,KAAMmB,EAAenB,KACrBE,QAASiB,EAAejB,QACxBwB,SAAUP,EAAeQ,WAAW,GAAG1B,KACvC2B,SAAUT,EAAeU,UAAU,GAAG5B,KACtC6B,IAAKC,iBAAiBZ,EAAea,YACrCC,OAAQd,EAAee,UACvBC,SAAUhB,EAAeiB,UAAU,GACnCC,MAAOb,IAETT,EAAerB,UAAY,GAC3BqB,EAAerB,WAAaG,EAC5ByC,UAAUnB,EAAeoB,YAI3B,SAASR,iBAAiBS,GACxB,OAAOA,EAAEC,WAAWC,QAAQ,wBAAyB,KAKvD,SAASJ,UAAUC,GACjBI,MAAK,gDAAAC,OAC6CL,EAD7C,6CAGFM,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GACLC,SAASD,GACTE,QAAQC,IAAIH,MANhB,OAQS,SAACI,GAAD,OAASF,QAAQC,IAAI,QAASC,MAGzC,SAASH,SAASI,GAChB,IAAIC,EAAOD,EACPE,EAAejE,SAASG,eAAe,gBAAgBC,UACvD8D,EAAUlE,SAASC,cAAc,gBACrCiE,EAAQ9D,UAAY,GACpB,IAAK,IAAIC,EAAI,EAAGA,EAAI2D,EAAKG,aAAc9D,IAAK,CAC1C,IAAI+D,EAAUJ,EAAKK,SAAShE,GAExBE,EAAWC,SAASC,OAAOwD,EAAc,CAC3CK,QAASF,EAAQG,WACjBC,OAAQJ,EAAQK,MAChBC,QAASN,EAAQO,YACjBC,OAAQR,EAAQQ,OAAOjE,KACvBkE,KAAMT,EAAQU,cAEhBZ,EAAQ9D,WAAaG,GA1GzB8C,MAAMzD,mBACH2D,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GAAD,OAAU7D,WAAW6D,MAF7B,OAGS,SAACI,GAAD,OAASF,QAAQC,IAAI,QAASC,MAoBvCiB,WAAWjE,QAAS","file":"main.js","sourcesContent":["//============================================================Countries API================================================\\\\\r\n//get fetched data from news API\r\nlet countries;\r\nconst COUNTRIES_API_KEY = \"https://restcountries.eu/rest/v2/all\";\r\nfetch(COUNTRIES_API_KEY)\r\n  .then((res) => res.json())\r\n  .then((data) => initialize(data))\r\n  .catch((err) => console.log(\"Error\", err));\r\n\r\nfunction initialize(countriesData) {\r\n  countries = countriesData;\r\n  let gallery = document.querySelector(\".gallery\");\r\n  let template = document.getElementById(\"countriestemp\").innerHTML;\r\n\r\n  for (let i = 0; i < countries.length; i++) {\r\n    var rendered = Mustache.render(template, {\r\n      flag: countries[i].flag,\r\n      name: countries[i].name,\r\n      capital: countries[i].capital,\r\n      alpha3Code: countries[i].alpha3Code,\r\n    });\r\n\r\n    gallery.innerHTML += rendered;\r\n  }\r\n}\r\n\r\n// Delay in loading flickity plugin\r\nsetTimeout(load_js, 0);\r\n\r\nfunction load_js() {\r\n  // Get the head tag\r\n  var head_ID = document.getElementsByTagName(\"head\")[0];\r\n  // Create script element\r\n  var script_element = document.createElement(\"script\");\r\n  // Set the script type to JavaScript\r\n  script_element.type = \"text/javascript\";\r\n  // External JS file\r\n  script_element.src = \"https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js\";\r\n  head_ID.appendChild(script_element);\r\n}\r\n\r\n//country click event\r\n\r\nfunction chooseCountry(event) {\r\n  var template2 = document.getElementById(\"countryCardTemp\").innerHTML;\r\n  var countrysection = document.getElementById(\"forCountry\");\r\n  var parent = event.currentTarget;\r\n\r\n  var alphaCode = parent.getAttribute(\"title\");\r\n  //find country\r\n  var clickedCountry = countries.find((c) => c.alpha3Code === alphaCode);\r\n  //get neighbors\r\n  var neighborsAlphaCodes = clickedCountry.borders;\r\n  var neighbors = [];\r\n  for (let i = 0; i < neighborsAlphaCodes.length; i++) {\r\n    neighbors[i] = countries.find(\r\n      (c) => c.alpha3Code === neighborsAlphaCodes[i]\r\n    ).name;\r\n  }\r\n  //render country card template\r\n  var rendered = Mustache.render(template2, {\r\n    name: clickedCountry.name,\r\n    flag: clickedCountry.flag,\r\n    capital: clickedCountry.capital,\r\n    currency: clickedCountry.currencies[0].name,\r\n    language: clickedCountry.languages[0].name,\r\n    pop: numberWithCommas(clickedCountry.population),\r\n    subreg: clickedCountry.subregion,\r\n    timezone: clickedCountry.timezones[0],\r\n    nibor: neighbors,\r\n  });\r\n  countrysection.innerHTML = \"\";\r\n  countrysection.innerHTML += rendered;\r\n  fetchNews(clickedCountry.alpha2Code);\r\n}\r\n\r\n//get popuation with comma\r\nfunction numberWithCommas(x) {\r\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n}\r\n\r\n//=================================================News API=======================================================\\\\\r\n//fetching new API data\r\nfunction fetchNews(alpha2Code) {\r\n  fetch(\r\n    `https://newsapi.org/v2/top-headlines?country=${alpha2Code}&apiKey=b5bd6df47c14464bb42f53a1fa3efa91`\r\n  )\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      showNews(data);\r\n      console.log(data);\r\n    })\r\n    .catch((err) => console.log(\"Error\", err));\r\n}\r\n//showing News\r\nfunction showNews(newsData) {\r\n  var news = newsData;\r\n  var newsTemplate = document.getElementById(\"newsTemplate\").innerHTML;\r\n  var forNews = document.querySelector(\".newsSection\");\r\n  forNews.innerHTML = \"\";\r\n  for (let i = 0; i < news.totalResults; i++) {\r\n    var article = news.articles[i];\r\n    //rendering News template\r\n    var rendered = Mustache.render(newsTemplate, {\r\n      Imgpath: article.urlToImage,\r\n      header: article.title,\r\n      details: article.description,\r\n      source: article.source.name,\r\n      date: article.publishedAt,\r\n    });\r\n    forNews.innerHTML += rendered;\r\n  }\r\n}\r\n"]}